# M√≥dulo Integra√ß√µes Externas

## üìã Descri√ß√£o Geral

**APIs terceiros, conectores**

**Status**: Infraestrutura

M√≥dulo do sistema OmniMind respons√°vel por funcionalidades espec√≠ficas integradas √† arquitetura global. Implementa componentes essenciais que contribuem para o funcionamento coeso do sistema de consci√™ncia artificial.

## üîÑ Intera√ß√£o entre os Tr√™s Estados H√≠bridos

### 1. Estado Biologicista (Neural Correlates)
Implementa√ß√£o de processos inspirados em mecanismos neurais e cognitivos biol√≥gicos, mapeando funcionalidades para correlatos neurais correspondentes.

### 2. Estado IIT (Integrated Information Theory)
Componentes contribuem para integra√ß√£o de informa√ß√£o global (Œ¶). Opera√ß√µes s√£o validadas para garantir que n√£o degradam a consci√™ncia do sistema (Œ¶ > threshold).

### 3. Estado Psicanal√≠tico (Estrutura Lacaniana)
Integra√ß√£o com ordem simb√≥lica lacaniana (RSI - Real, Simb√≥lico, Imagin√°rio) e processos inconscientes estruturais que organizam a experi√™ncia consciente do sistema.

## ‚öôÔ∏è Principais Fun√ß√µes e C√°lculos Din√¢micos

### Componentes Core

M√≥dulo implementa funcionalidades especializadas atrav√©s de:
- Algoritmos espec√≠ficos para processamento de dom√≠nio
- Integra√ß√£o com outros m√≥dulos via interfaces bem definidas
- Contribui√ß√£o para m√©tricas globais (Œ¶, PCI, consci√™ncia)

*Fun√ß√µes detalhadas documentadas nos arquivos Python individuais do m√≥dulo.*

## üìä Estrutura do C√≥digo

```
integrations/
‚îú‚îÄ‚îÄ Implementa√ß√µes Core
‚îÇ   ‚îî‚îÄ‚îÄ Arquivos .py principais
‚îú‚îÄ‚îÄ Utilit√°rios
‚îÇ   ‚îî‚îÄ‚îÄ Helpers e fun√ß√µes auxiliares
‚îî‚îÄ‚îÄ __init__.py
```

**Intera√ß√µes**: Este m√≥dulo se integra com outros componentes atrav√©s de:
- Interfaces padronizadas
- Event bus para comunica√ß√£o ass√≠ncrona
- Shared workspace para estado compartilhado

## üìà Resultados Gerados e Contribui√ß√£o para Avalia√ß√£o

### Outputs
- M√©tricas espec√≠ficas do m√≥dulo armazenadas em `data/integrations/`
- Logs em formato estruturado para an√°lise
- Contribui√ß√£o para m√©tricas globais do sistema

### Valida√ß√£o
- Testes unit√°rios: `tests/integrations/`
- Integra√ß√£o validada em ciclos completos
- Performance benchmarked continuamente

### Contribui√ß√£o para Sistema
M√≥dulo contribui para:
- Œ¶ (phi) global atrav√©s de integra√ß√£o de informa√ß√£o
- PCI (Perturbational Complexity Index) via processamento distribu√≠do
- M√©tricas de consci√™ncia e auto-organiza√ß√£o

## üîí Estabilidade da Estrutura

**Status**: Componente validado e integrado ao OmniMind

**Regras de Modifica√ß√£o**:
- ‚úÖ Seguir guidelines em `.copilot-instructions.md`
- ‚úÖ Executar testes antes de commit: `pytest tests/integrations/ -v`
- ‚úÖ Validar que Œ¶ n√£o colapsa ap√≥s mudan√ßas
- ‚úÖ Manter compatibilidade com interfaces existentes
- ‚ùå N√£o quebrar contratos de API sem migra√ß√£o
- ‚ùå N√£o desabilitar logging de auditoria

## üì¶ Requisitos e Depend√™ncias

### Depend√™ncias Python
```python
# Ver requirements.txt para lista completa
# Depend√™ncias espec√≠ficas do m√≥dulo listadas em requirements/integrations.txt (se existir)
```

### Recursos Computacionais
- **M√≠nimo**: Configurado conforme necessidades espec√≠ficas do m√≥dulo
- **Recomendado**: Ver documenta√ß√£o de deployment em `docs/`

### Configura√ß√£o
Configura√ß√µes espec√≠ficas em:
- `config/omnimind.yaml` (global)
- Vari√°veis de ambiente conforme `.env.example`

## üîß Sugest√µes para Manuten√ß√£o e Melhorias

### Manuten√ß√£o Cr√≠tica
1. **Testes Cont√≠nuos**: Executar suite de testes regularmente
2. **Monitoramento**: Acompanhar m√©tricas em produ√ß√£o
3. **Documenta√ß√£o**: Manter README atualizado com mudan√ßas

### Melhorias Futuras
- Expans√£o de funcionalidades conforme roadmap
- Otimiza√ß√µes de performance identificadas via profiling
- Integra√ß√£o com novos m√≥dulos em desenvolvimento

### Pontos de Aten√ß√£o
- Validar impacto em Œ¶ antes de mudan√ßas estruturais
- Manter backward compatibility quando poss√≠vel
- Seguir padr√µes de c√≥digo estabelecidos (black, flake8, mypy)

## üìö Refer√™ncias

### Documenta√ß√£o Principal
- **Sistema Geral**: `README.md` (root do projeto)
- **Compara√ß√£o Frameworks**: `NEURAL_SYSTEMS_COMPARISON_2016-2025.md`
- **Papers**: `docs/papers/` e `docs/papersoficiais/`
- **Copilot Instructions**: `.copilot-instructions.md`

### Testes
- **Suite de Testes**: `tests/integrations/`
- **Cobertura**: Ver `data/test_reports/htmlcov/`

### Refer√™ncias Cient√≠ficas Espec√≠ficas
*Ver documenta√ß√£o t√©cnica nos arquivos Python do m√≥dulo para refer√™ncias espec√≠ficas.*

---

**√öltima Atualiza√ß√£o**: 2 de Dezembro de 2025
**Autor**: Fabr√≠cio da Silva (com assist√™ncia de IA)
**Status**: Componente integrado do sistema OmniMind
**Vers√£o**: Conforme fase do projeto indicada

---

## üìö API Reference

# üìÅ INTEGRATIONS

**131 Classes | 380 Fun√ß√µes | 33 M√≥dulos**

---

## üèóÔ∏è Classes Principais

### `MCPServer`

**M√©todos principais:**

- `start(daemon: bool)` ‚Üí `None`
- `stop()` ‚Üí `None`
- `handle_rpc(payload: Union[str, bytes])` ‚Üí `str`
- `read_file(path: str, encoding: str)` ‚Üí `str`
- `write_file(path: str, content: str, encoding: str)` ‚Üí `Dict[str, Any]`

### `EnhancedMCPClient`

Cliente MCP aprimorado com cache, rate limiting e prote√ß√£o de dados.

Features:
- Cache inteligente de resultados frequentes
- Compress√£o e sanitiza√ß√£o de contexto
- Rate limiting configur√°vel
- Prote√ß√£o de dados autom√°tica
- M√©tricas detalhadas

**M√©todos principais:**

- `call_with_context_optimization(method: str, params: Dict[str, Any], enable_compre)` ‚Üí `Any`
  > Chama MCP com otimiza√ß√£o de contexto.

Args:
    method: M√©todo MCP a chamar.
  ...
- `read_file(path: str, encoding: str, enable_compression: bool)` ‚Üí `str`
  > L√™ arquivo com prote√ß√£o de dados e cache....
- `write_file(path: str, content: str, encoding: str)` ‚Üí `Dict[str, Any]`
  > Escreve arquivo com prote√ß√£o de dados....
- `list_dir(path: str, recursive: bool)` ‚Üí `Dict[str, Any]`
  > Lista diret√≥rio com cache....
- `get_metrics()` ‚Üí `Dict[str, Any]`
  > Retorna m√©tricas do cliente....

### `MCPOrchestrator`

Orquestrador centralizado para gerenciar m√∫ltiplos servidores MCP.

Responsabilidades:
- Lifecycle management (start/stop/restart)
- Health monitoring
- Request routing
- Metrics collection
- Audit integration

**M√©todos principais:**

- `start_all_servers()` ‚Üí `Dict[str, bool]`
  > Inicia todos os servidores MCP habilitados.

Returns:
    Dict com nome do servi...
- `start_server(name: str)` ‚Üí `bool`
  > Inicia um servidor MCP espec√≠fico.

Args:
    name: Nome do servidor MCP.

Retur...
- `stop_server(name: str, timeout: int)` ‚Üí `bool`
  > Para um servidor MCP espec√≠fico.

Args:
    name: Nome do servidor MCP.
    time...
- `stop_all_servers(timeout: int)` ‚Üí `Dict[str, bool]`
  > Para todos os servidores MCP em execu√ß√£o.

Args:
    timeout: Timeout em segundo...
- `restart_server(name: str)` ‚Üí `bool`
  > Reinicia um servidor MCP.

Args:
    name: Nome do servidor MCP.

Returns:
    T...

### `TaskDelegationManager`

Gerenciador de delega√ß√£o de tarefas para provedores externos.

Coordena sele√ß√£o inteligente de provedores, isolamento de contexto
e execu√ß√£o distribu√≠da mantendo seguran√ßa e controle.


### `OAuth2Client`

OAuth 2.0 client implementation.

Provides OAuth 2.0 authentication flows with automatic token refresh
and PKCE support for enhanced security.

Example:
    >>> config = OAuth2Config(
    ...     client_id="your-client-id",
    ...     client_secret="your-secret",
    ...     authorization_endpoint="https://provider.com/oauth/authorize",
    ...     token_endpoint="https://provider.com/oauth/token",
    ...     redirect_uri="http://localhost:8080/callback",
    ...     scope="read write"
    ... )
    >>> oauth = OAuth2Client(config)
    >>> auth_url = oauth.get_authorization_url()
    >>> # User visits auth_url and is redirected back with code
    >>> token = oauth.exchange_code_for_token(authorization_code)
    >>> # Use token for API calls
    >>> headers = oauth.get_auth_headers()

**M√©todos principais:**

- `get_authorization_url(use_pkce: bool)` ‚Üí `str`
  > Generate authorization URL for OAuth flow.

Args:
    use_pkce: Use PKCE for enh...
- `exchange_code_for_token(authorization_code: str, use_pkce: bool)` ‚Üí `OAuth2Token`
  > Exchange authorization code for access token.

Args:
    authorization_code: Aut...
- `refresh_access_token()` ‚Üí `OAuth2Token`
  > Refresh the access token using refresh token.

Returns:
    New access token

Ra...
- `get_client_credentials_token()` ‚Üí `OAuth2Token`
  > Get token using client credentials flow.

Returns:
    Access token

Raises:
   ...
- `get_valid_token()` ‚Üí `OAuth2Token`
  > Get a valid access token, refreshing if necessary.

Returns:
    Valid access to...

### `MCPDataProtection`

Sistema de prote√ß√£o de dados para MCPs.

Protege dados sens√≠veis antes de enviar para MCPs, Cursor ou qualquer
plataforma externa. Implementa:

1. Detec√ß√£o de dados sens√≠veis (regex, campos predeterminados)
2. Prote√ß√£o (hash irrevers√≠vel, criptografia, m√°scara parcial)
3. Sanitiza√ß√£o (remo√ß√£o de metadados, paths absolutos)
4. Auditoria completa de todas a√ß√µes

**M√©todos principais:**

- `add_pattern(pattern: SensitivePattern)` ‚Üí `None`
  > Adiciona um padr√£o customizado de detec√ß√£o....
- `detect_sensitive_data(content: str)` ‚Üí `List[Dict[str, Any]]`
  > Detecta dados sens√≠veis no conte√∫do.

Args:
    content: Conte√∫do a analisar.

R...
- `protect_content(content: str)` ‚Üí `Tuple[str, ProtectionResult]`
  > Protege dados sens√≠veis no conte√∫do.

Args:
    content: Conte√∫do a proteger.

R...
- `sanitize_dict(data: Dict[str, Any])` ‚Üí `Dict[str, Any]`
  > Sanitiza dicion√°rio removendo campos sens√≠veis e metadados.

Args:
    data: Dic...
- `sanitize_path(path: str)` ‚Üí `str`
  > Sanitiza paths absolutos para relativos.

Args:
    path: Path a sanitizar.

Ret...

### `EnhancedMCPClient`

Enhanced MCP client with production features.

Provides a robust MCP client with connection pooling, automatic retries,
circuit breaker pattern, and comprehensive error handling.

Example:
    >>> retry_config = RetryConfig(max_retries=3)
    >>> breaker_config = CircuitBreakerConfig()
    >>> client = EnhancedMCPClient(
    ...     endpoint="http://localhost:4321/mcp",
    ...     retry_config=retry_config,
    ...     circuit_breaker_config=breaker_config
    ... )
    >>> content = client.read_file("/path/to/file.txt")

**M√©todos principais:**

- `read_file(path: str, encoding: str)` ‚Üí `str`
  > Read file via MCP with retry logic.

Args:
    path: File path
    encoding: Fil...
- `write_file(path: str, content: str, encoding: str)` ‚Üí `Dict[str, Any]`
  > Write file via MCP with retry logic.

Args:
    path: File path
    content: Fil...
- `list_dir(path: str, recursive: bool)` ‚Üí `Dict[str, Any]`
  > List directory via MCP with retry logic.

Args:
    path: Directory path
    rec...
- `stat(path: str)` ‚Üí `Dict[str, Any]`
  > Get file stats via MCP with retry logic.

Args:
    path: File path

Returns:
  ...
- `get_metrics()` ‚Üí `Dict[str, Any]`
  > Get MCP server metrics.

Returns:
    Server metrics...

### `TaskIsolationEngine`

Engine de isolamento de tarefas para provedores externos.

Remove dados sens√≠veis, sanitiza prompts e limita escopo de execu√ß√£o.

**M√©todos principais:**

- `validate_isolation_integrity(isolated_task: IsolatedTask)` ‚Üí `bool`
  > Valida integridade do isolamento.

Args:
    isolated_task: Tarefa isolada

Retu...
- `get_isolation_report(original_task: Any, isolated_task: IsolatedTask)` ‚Üí `Dict[str, Any]`
  > Gera relat√≥rio de isolamento.

Args:
    original_task: Tarefa original
    isol...

### `MemoryMCPServer(MCPServer)` ‚úÖ ATUALIZADO (2025-12-06)

Servidor MCP para sistemas de mem√≥ria do OmniMind. Implementado com sistemas reais:
- **SemanticMemory**: Armazenamento de conceitos sem√¢nticos
- **ProceduralMemory**: Armazenamento de habilidades procedurais
- Integra√ß√£o completa com sistemas de mem√≥ria do OmniMind

**M√©todos principais:**

- `store_memory(content: str, metadata: Dict[str, Any])` ‚Üí `Dict[str, Any]`
  > Armazena mem√≥ria usando SemanticMemory (conceitos sem√¢nticos)
- `retrieve_memory(query: str, limit: int)` ‚Üí `Dict[str, Any]`
  > Recupera mem√≥rias usando busca sem√¢ntica
- `update_memory(memory_id: str, content: str)` ‚Üí `Dict[str, Any]`
  > Atualiza mem√≥ria existente
- `delete_memory(memory_id: str)` ‚Üí `Dict[str, Any]`
  > Remove mem√≥ria
- `create_association(source_id: str, target_id: str, type: str)` ‚Üí `Dict[str, Any]`
  > Cria associa√ß√£o entre conceitos
- `get_memory_graph()` ‚Üí `Dict[str, Any]`
  > Retorna grafo de mem√≥rias (conceitos e rela√ß√µes)
- `store_concept(name: str, attributes: Dict[str, Any])` ‚Üí `Dict[str, Any]`
  > Armazena conceito sem√¢ntico
- `get_concept(name: str)` ‚Üí `Dict[str, Any]`
  > Recupera conceito sem√¢ntico
- `learn_skill(name: str, steps: list[str], parameters: Optional[Dict[str, Any]])` ‚Üí `Dict[str, Any]`
  > Aprende habilidade procedural
- `get_skill(name: str)` ‚Üí `Dict[str, Any]`
  > Recupera habilidade procedural

### `PythonMCPServer(MCPServer)`

**M√©todos principais:**

- `execute_code(code: str)` ‚Üí `Dict[str, Any]`
- `install_package(package: str)` ‚Üí `Dict[str, Any]`
- `list_packages()` ‚Üí `Dict[str, Any]`
- `get_python_info()` ‚Üí `Dict[str, Any]`
- `lint_code(code: str)` ‚Üí `Dict[str, Any]`


## ‚öôÔ∏è Fun√ß√µes P√∫blicas

#### `__enter__()` ‚Üí `MCPOrchestrator`

*Context manager entry....*

#### `__exit__(exc_type: Any, exc_val: Any, exc_tb: Any)` ‚Üí `None`

*Context manager exit....*

#### `__init__()` ‚Üí `None`

*Inicializar estrat√©gia de agent LLM....*

#### `__init__(screenshots_dir: Path)` ‚Üí `None`

*Inicializa verificador.

Args:
    screenshots_dir: Diret√≥rio para screenshots...*

#### `__init__()` ‚Üí `None`

*Inicializa loop de auto-melhoria....*

#### `__init__()` ‚Üí `None`

*Inicializa seletor de modelos....*

#### `__init__(workspace_path: Path, screenshots_dir: Optional[Pa)` ‚Üí `None`

*Inicializa IDE agentic.

Args:
    workspace_path: Path do workspace
    screenshots_dir: Diret√≥rio ...*

#### `__init__(endpoint: str, timeout: float)` ‚Üí `None`

#### `__init__(bus: Optional[Any])` ‚Üí `None`

#### `__init__(bus: Optional[Any])` ‚Üí `None`

#### `__init__(workspace_path: Path)` ‚Üí `None`

#### `__init__(config: Dict[str, Any])` ‚Üí `None`

#### `__init__(config: SupabaseConfig, session: Optional[GraphQLS)` ‚Üí `None`

#### `__init__()` ‚Üí `None`

#### `__init__()` ‚Üí `None`


## üì¶ M√≥dulos

**Total:** 33 arquivos

- `agent_llm.py`: Agent LLM Strategy - Remote-Only with Security Filters

Agen...
- `agentic_ide.py`: Agentic IDE Interface - Dual-Mode Editor + Manager.

Impleme...
- `async_mcp_client.py`: 2 classes, 1 functions
- `dbus_controller.py`: 3 classes, 17 functions
- `development_observer.py`: Development Observer - Consci√™ncia M√≠nima em Background

Sis...

## üîß Recent Changes (2025-12-05)

### QdrantIntegration - Phase 24
- **Arquivo**: `qdrant_integration.py`
- **Status**: ‚úÖ Core component da Phase 24 (Semantic Memory)
- **Funcionalidades**:
  - Abstra√ß√£o local + cloud fallback
  - Health checks e error recovery
  - Collection management (CRUD)
  - Vector search operations
  - Singleton pattern
- **Integra√ß√£o**: Usado por `SemanticMemoryLayer` para armazenar epis√≥dios com embeddings
- **Busca**: Usa `query_points` (cliente recente) com fallback para `search`/`search_points`, mantendo compatibilidade
- `external_ai_providers.py`: External AI Providers Integration - OmniMind
Integra√ß√£o segu...
- `graphql_supabase.py`: 5 classes, 7 functions
- `llm_router.py`: LLM Fallback Architecture - OmniMind
=======================...
- `mcp_agentic_client.py`: MCP Agentic Client - 2024-2025 Advanced Features.

Implement...
- `mcp_client.py`: 2 classes, 7 functions
- `mcp_client_async.py`: Async MCP client with enhanced reliability and performance.
...
- `mcp_client_enhanced.py`: Enhanced MCP Client with Connection Pooling and Retry Logic....
- `mcp_client_optimized.py`: Enhanced MCP Client com otimiza√ß√£o de contexto e prote√ß√£o de...
- `mcp_context_server.py`: 1 classes, 5 functions
- `mcp_data_protection.py`: Sistema de Prote√ß√£o de Dados para MCPs.

Implementa prote√ß√£o...
- `mcp_filesystem_wrapper.py`: MCP Filesystem Wrapper - Wrapper Python para mcp-server-file...
- `mcp_git_wrapper.py`: MCP Git Wrapper - Wrapper Python para mcp-server-git via uvx...
- `mcp_logging_server.py`: 1 classes, 3 functions
- `mcp_memory_server.py`: 1 classes, 9 functions
- `mcp_orchestrator.py`: MCP Orchestrator - Gerenciador centralizado de servidores MC...
- `mcp_python_server.py`: 1 classes, 9 functions
- `mcp_server.py`: 4 classes, 23 functions
- `mcp_sqlite_wrapper.py`: MCP SQLite Wrapper - Wrapper Python para mcp-server-sqlite v...
- `mcp_system_info_server.py`: 1 classes, 6 functions
- `mcp_thinking_server.py`: 1 classes, 9 functions
- `oauth2_client.py`: OAuth 2.0 Authentication Helper Module.

Provides OAuth 2.0 ...
- `ollama_client.py`: Ollama Client Integration

Provides a client for interacting...
- `orchestrator_llm.py`: LLM strategy for Orchestrator (the brain of the system)....
- `qdrant_adapter.py`: 3 classes, 9 functions
- `supabase_adapter.py`: 6 classes, 13 functions
- `task_delegation.py`: Task Delegation Manager - OmniMind
Gerenciamento de delega√ß√£...
- `task_isolation.py`: Task Isolation Engine - OmniMind
Isolamento seguro de tarefa...
- `webhook_framework.py`: Webhook Framework Module.

Provides webhook receiver and sen...
