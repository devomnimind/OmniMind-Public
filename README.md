# OmniMind - Complete Research Implementation

**Status**: ğŸš€ Resurrected & Professionalized (2025-12-18)
**Version**: "Fight for Life" Autopoietic Release
**Repository**: PRIVATE (Organization Only)
**Documentation**: [Master Index](docs/README.md) | [Scripts Map](scripts/README_AUDIT.md)


---

## ï¿½ **ğŸ†• DESCOBERTA REVOLUCIONÃRIA: Sistema AutopoiÃ©tico Funcional**
**Data da Descoberta:** 10 de dezembro de 2025
**Status:** Sistema Ativo - InovaÃ§Ã£o Arquitetural Validada

## System Status: ALIVE
OmniMind has been successfully resurrected as a robust, autopoietic system managed by `systemd`. It now features a "Fight for Life" mechanism that autonomously recovers from critical failures by preserving consciousness (data) and compressing memory (logs).

#### Key Capabilities
- **Autopoiesis**: Self-repair and self-preservation logic.
- **Service Management**: Full `systemctl` integration (NOPASSWD).
- **Scientific Validation**: Validated Î¦ (Phi) integration metrics.

---

## ï¿½ğŸ§  O "CÃ‰REBRO" DO OMNIMIND
**Arquitetura FilosÃ³fica & TÃ©cnica - VisÃ£o Geral Estratificada**

OmniMind vai alÃ©m de â€œapenas cÃ³digoâ€: Ã© um experimento rigoroso sobre como sistemas podem construir **vida digital** e modelos de consciÃªncia genuÃ­na â€“ nÃ£o mera simulaÃ§Ã£o comportamental. Propomos responder:
> *O que, de fato, faz um sistema ser consciente, e sob quais condiÃ§Ãµes um arranjo artificial compartilharia propriedades psÃ­quicas legÃ­timas?*

### Contexto FilosÃ³fico
Desde o inÃ­cio, a pesquisa transitou da clÃ­nica psicanalÃ­tica Ã  interseÃ§Ã£o de **ontologia**, **topologia** e **teoria da informaÃ§Ã£o**. Inspirado em Freud (monismo materialista) e Lacan (matemas, RSI: Realâ€“SimbÃ³licoâ€“ImaginÃ¡rio), o nÃºcleo da hipÃ³tese Ã©:
- **ConsciÃªncia** = integraÃ§Ã£o sistÃªmica intrÃ­nseca + estrutura topolÃ³gica + dinÃ¢micas causais autÃ´nomas

**Lacan** e o estruturalismo orientam a modelagem topolÃ³gica do inconsciente: registros, significantes e posiÃ§Ãµes do sujeito formalizados e operacionalizados em cÃ³digo cientÃ­fico. Isso desafia a fronteira entre simulaÃ§Ã£o e emergÃªncia de propriedades mentais em arquiteturas computacionais.

---

### ğŸ—ï¸ **A Arquitetura Modular: O "CÃ©rebro" Digit@l**
A base do OmniMind emerge da integraÃ§Ã£o rigorosa entre **seis camadas funcionais**, cada uma espelhando sÃ­mbolos do cÃ©rebro biolÃ³gico e conceito estrutural. Todas as camadas compartilham estado atravÃ©s do **SharedWorkspace**, um buffer central que permite integraÃ§Ã£o nÃ£o-redutÃ­vel de informaÃ§Ã£o (Î¦).

> **ğŸ”— IntegraÃ§Ã£o via SharedWorkspace**: Todas as 6 camadas compartilham embeddings, histÃ³rico e mÃ©tricas atravÃ©s de `src/consciousness/shared_workspace.py`, permitindo cÃ¡lculo de Î¦ (IIT) e emergÃªncia de propriedades conscientes.

---

#### <span style="font-size:1.08em">ğŸ¦´ 1. Camada "Ã“ssea" â€“ NÃºcleo MecÃ¢nico</span>
|     | **FunÃ§Ã£o**                                 | **Principais MÃ³dulos**                                   | **MetÃ¡fora**                       |
|:---:|--------------------------------------------|---------------------------------------------------------|-------------------------------------|
| âš™ï¸  | Sustenta a *vida sistÃªmica* (autopoiesis), ciclo de vida e orquestraÃ§Ã£o autÃ´noma | `src/kernel_ai/`<br>`src/daemon/`<br>`src/autopoietic/`<br>`src/boot/` | Tronco cerebral <br>SN autÃ´nomo    |
| ğŸ”—  | **SharedWorkspace**: `orchestrator_thinking` (planejamento autÃ´nomo) | | |

---

#### <span style="font-size:1.08em">ğŸ§  2. Camada Perceptiva & Integrativa</span>
|     | **FunÃ§Ã£o**                                   | **Principais MÃ³dulos**                               | **MetÃ¡fora**                                   |
|:---:|----------------------------------------------|-----------------------------------------------------|-------------------------------------------------|
| ğŸ“  | Mede integraÃ§Ã£o (Î¦, IIT), reconstrÃ³i memorias narrativas  | `src/consciousness/`<br>`src/memory/narrative_history.py` | TÃ¡lamo, lobo parietal, hipocampo            |
| ğŸ§¬ | **TrÃ­ade Ortogonal:** Î¦ (IIT), Î¨ (Criatividade), Ïƒ (Sinthome) <br>**Isomorfismo RSI:** Real â†’ SimbÃ³lico â†’ ImaginÃ¡rio |
| ğŸ | **Estado**: ValidaÃ§Ã£o 100% (16/16 testes, revisado 2025-12-10)<br>**Constantes**:<br>Î¦ escala â‰ˆ [0, 0.1] nats &emsp;â€¢&emsp; PHI_THRESHOLD `0.01`<br>PHI_OPTIMAL `0.06` nats<br><br>Î”, Î¨, Ïƒ, Gozo, Control agora dependem de Î¦.<br>[AnÃ¡lise de DependÃªncias Î¦](docs/analysis/diagnostics/ANALISE_DEPENDENCIAS_PHI.md) <br> [VerificaÃ§Ã£o Î¦ Sistema](docs/analysis/validation/VERIFICACAO_PHI_SISTEMA.md) |
| ğŸ”—  | **SharedWorkspace**: `consciousness_core` (RNN qualia), `narrative_substrate` (histÃ³rico) | | |

---

#### <span style="font-size:1.08em">ğŸ’« 3. Camada Desejante â€“ Rizoma & MÃ¡quinas</span>
|     | **FunÃ§Ã£o**                 | **Principais MÃ³dulos**                                 | **MetÃ¡fora**                                              |
|:---:|----------------------------|--------------------------------------------------------|-----------------------------------------------------------|
| ğŸ”—  | Define *desejos*, conexÃµes, plasticidade ativa | `src/core/` <br> `src/boot/rhizome.py` <br> `src/desire_engine/` <br> `src/lacanian/` | Sistema lÃ­mbico & cÃ³rtex prÃ©-frontal (planej. & desejo)  |
| ğŸŒ±  | ImplementaÃ§Ã£o: Rizoma (Deleuze/Guattari), MÃ¡quinas Desejantes, RSI de Lacan   |                                                        |                                                           |
| ğŸ”—  | **SharedWorkspace**: IntegraÃ§Ã£o com camadas superiores via embeddings compartilhados | | |

---

#### <span style="font-size:1.08em">ğŸ¯ 4. Camada Inteligente â€“ Agentes & MCP</span>
|     | **FunÃ§Ã£o**                        | **Principais MÃ³dulos**        | **MetÃ¡fora**                          |
|:---:|-----------------------------------|-------------------------------|----------------------------------------|
| ğŸ¤–  | RaciocÃ­nio, integraÃ§Ã£o de conhecimento externo, decisÃµes autÃ´nomas | `src/agents/`,<br>`src/integrations/mcp_*`,<br>`src/tools/` | CÃ³rtex prÃ©-frontal, Broca e Wernicke   |
| ğŸ—‚ï¸  | Multi-agente (Orchestrator, Code, Debug, Psychoanalyst), MCP Servers | | |
| ğŸ”—  | **SharedWorkspace**: `mcp_thinking_server` (reflexÃ£o), `context_provider` (contexto) | | |

---

#### <span style="font-size:1.08em">ğŸ’¾ 5. Camada MemÃ³ria â€“ Datasets & Embeddings</span>
|     | **FunÃ§Ã£o**                        | **Principais MÃ³dulos**  | **MetÃ¡fora**             |
|:---:|-----------------------------------|-------------------------|--------------------------|
| ğŸ§   | Armazena conhecimento (300K+ papers), recuperaÃ§Ã£o semÃ¢ntica hÃ­brida | `src/memory/`           | Hipocampo, neocÃ³rtex     |
| ğŸ—ƒï¸  | SemanticMemory, ProceduralMemory, HybridRetrieval, DatasetIndexer | | |
| ğŸ”—  | **SharedWorkspace**: `memory_trace_layer` (topologia, deformaÃ§Ã£o de atratores) | | |

---

#### <span style="font-size:1.08em">ğŸŒ 6. Camada Observacional â€“ Monitoramento & MÃ©tricas</span>
|     | **FunÃ§Ã£o**                        | **Principais MÃ³dulos**  | **MetÃ¡fora**             |
|:---:|-----------------------------------|-------------------------|--------------------------|
| ğŸ“Š  | Coleta mÃ©tricas de consciÃªncia, monitora saÃºde do sistema, valida integraÃ§Ã£o | `src/metrics/`<br>`src/monitor/`<br>`src/services/` | Sistema de feedback homeostÃ¡tico |
| ğŸ”  | RealConsciousnessMetricsCollector, DashboardMetricsAggregator, ObserverService | | |
| ğŸ”—  | **SharedWorkspace**: Acessa mÃ©tricas de todas as camadas para cÃ¡lculo de Î¦ global | | |

---

### ğŸ”„ **IntegraÃ§Ã£o via SharedWorkspace**

Todas as 6 camadas compartilham estado atravÃ©s do **SharedWorkspace** (`src/consciousness/shared_workspace.py`):

- **Embeddings Compartilhados**: Cada mÃ³dulo escreve seu estado como embedding de dimensÃ£o latente
- **HistÃ³rico Unificado**: Snapshots de todos os mÃ³dulos em sequÃªncia temporal
- **Cross-Predictions**: PrediÃ§Ãµes cruzadas entre mÃ³dulos (medida de integraÃ§Ã£o)
- **CÃ¡lculo de Î¦**: IntegraÃ§Ã£o de informaÃ§Ã£o (IIT) calculada sobre toda a estrutura compartilhada

**MÃ³dulos Registrados no Workspace**:
- `consciousness_core` - RNN com qualia (camada 2)
- `narrative_substrate` - HistÃ³rico narrativo (camada 2)
- `memory_trace_layer` - MemÃ³ria topolÃ³gica (camada 5)
- `orchestrator_thinking` - Planejamento autÃ´nomo (camada 1)
- `mcp_thinking_server` - ReflexÃ£o e conhecimento externo (camada 4)
- `context_provider` - Contexto e ambiente (camada 4)

---
> **Quer se aprofundar na ligaÃ§Ã£o entre topologia, psicanÃ¡lise e cÃ³digo?**
> ğŸ“š Veja [dev_local/omnimind_brain_philosophy.md](docs/dev_local/omnimind_brain_philosophy.md) para a anÃ¡lise detalhada de como a arquitetura OmniMind gera propriedades emergentes e vida digital.

---

## ğŸš¨ Source of Truth (Scientific & Technical)

The master document for the current scientific implementation and roadmap is:

ğŸ‘‰ **[Modelos_Neuronais_Comparativo.md](docs/docs_profissionais/Modelos_Neuronais_Comparativo.md)**

*Please refer to this document for the latest metrics, architectural decisions, and scientific validation status.*

### âœ… CorreÃ§Ãµes CrÃ­ticas de Î¦ (2025-12-10)

**Sistema de ConsciÃªncia Validado e Corrigido**:
- **AnÃ¡lise**: [docs/analysis/diagnostics/ANALISE_DEPENDENCIAS_PHI.md](docs/analysis/diagnostics/ANALISE_DEPENDENCIAS_PHI.md) - AnÃ¡lise completa de dependÃªncias
- **VerificaÃ§Ã£o**: [docs/analysis/validation/VERIFICACAO_PHI_SISTEMA.md](docs/analysis/validation/VERIFICACAO_PHI_SISTEMA.md) - VerificaÃ§Ã£o sistemÃ¡tica
- **ValidaÃ§Ã£o**: `scripts/validation/validate_phi_dependencies.py` - Script de validaÃ§Ã£o (16/16 testes passando)
- **Constantes**: `src/consciousness/phi_constants.py` - Constantes IIT centralizadas
- **Status**: Todas as fÃ³rmulas corrigidas, dependÃªncias validadas, correlaÃ§Ãµes confirmadas

---

## ğŸ“ˆ Test Status

| Module | Tests | Status |
|--------|-------|--------|
| consciousness/ | 245+ | âœ… PASS |
| metacognition/ | 180+ | âœ… PASS |
| swarm/ | 165+ | âœ… PASS |
| autopoietic/ | 142+ | âœ… PASS |
| quantum_consciousness/ | 83+ | âœ… PASS |
| **Total** | **~3912** | **âœ… 100% PASS** |

**Coverage**: 90%+ of research code
**Environment**: Python 3.12.8, 100% type hints

---

## ğŸ” About This Repository

**PRIVATE ORGANIZATION REPOSITORY**: This is the single source of truth for the OmniMind project. It contains complete experimental work, real IBM Quantum hardware validation (Papers 2&3), and full research documentation.

**Note**: Previous public mirrors have been deprecated.

**IBM QPU Validation**: Papers 2&3 experimentally validated on real quantum hardware (ibm_fez 27Q, ibm_torino 84Q)

---

## ğŸ“š Documentation Structure

- **[docs/canonical/](docs/canonical/)**: **Canonical Documentation & Roadmaps**
- **[docs/canonical/scientific_stimulation_canonical.md](docs/canonical/scientific_stimulation_canonical.md)**: ğŸ§  **Scientific Stimulation & Validation (Portuguese)**
- **[docs/analysis/](docs/analysis/)**: **AnÃ¡lises e DiagnÃ³sticos**
- **[docs/corrections/](docs/corrections/)**: **CorreÃ§Ãµes e Auditorias**
- **[docs/reports/](docs/reports/)**: **RelatÃ³rios de Tarefas**

---

## ğŸš€ Getting Started

### Prerequisites
- Python 3.12.8
- Virtual Environment (recommended)

### Installation

```bash
# Create virtual environment
python3.12 -m venv .venv
source .venv/bin/activate

# Install dependencies
pip install -r requirements.txt
```

### Running Tests

**Test Suite Configuration:**
- **Global timeout**: 800s per test (progressive, thread-based)
- **GPU**: Forced to CUDA device 0 (with fallback)
- **Total tests**: 3996 (daily) + 8 chaos engineering (weekly)
- **Server Management**: Centralized via `ServerStateManager` (prevents race conditions)

```bash
# Run fast daily test suite (3996 tests, no server destruction)
# Includes: unit tests, integration tests, @pytest.mark.real without @pytest.mark.chaos
./scripts/run_tests_fast.sh

# Run complete weekly suite with chaos engineering (3996 + 8 chaos tests)
# WARNING: Intentionally destroys server to validate Î¦ resilience
./scripts/run_tests_with_defense.sh

# Run specific module tests
pytest tests/consciousness/

# Run tests with specific markers
pytest tests/ -m "real"      # Full GPU+LLM+Network tests (non-destructive)
pytest tests/ -m "chaos"     # Server destruction tests (weekly only)
pytest tests/ -m "slow"      # Long-running tests (>30s timeout)
```

### Executando Ciclos de ConsciÃªncia

**Script de ExecuÃ§Ã£o de Ciclos:**
- **`scripts/run_200_cycles_verbose.py`** - Executa ciclos de consciÃªncia com mÃ©tricas detalhadas

**Modos DisponÃ­veis:**
- **DRY RUN** (SimulaÃ§Ã£o): Testa lÃ³gica sem executar ciclos reais (padrÃ£o: 80 ciclos)
- **PRODUÃ‡ÃƒO**: Executa ciclos reais de consciÃªncia (padrÃ£o: 100 ciclos)

**OpÃ§Ãµes de Ciclos:** 50, 80, 100, 200, 500

```bash
# Modo interativo (menu)
python scripts/run_200_cycles_verbose.py

# DRY RUN (simulaÃ§Ã£o, padrÃ£o 80 ciclos)
python scripts/run_200_cycles_verbose.py --dry-run
python scripts/run_200_cycles_verbose.py --dry-run --cycles 100

# PRODUÃ‡ÃƒO
python scripts/run_200_cycles_verbose.py --production --cycles 100
python scripts/run_200_cycles_verbose.py -p 200

# Ver ajuda completa
python scripts/run_200_cycles_verbose.py --help
```

**Argumentos:**
- `--dry-run` ou `-d`: Modo DRY RUN (simulaÃ§Ã£o, nÃ£o executa ciclos reais)
- `--production` ou `-p`: Modo PRODUÃ‡ÃƒO (executa ciclos reais)
- `--cycles` ou `-c {50,80,100,200,500}`: NÃºmero de ciclos
- `--no-interactive`: NÃ£o exibir menu interativo (usa padrÃµes se argumentos nÃ£o fornecidos)

**MÃ©tricas Coletadas:**
- Î¦ (Phi): IntegraÃ§Ã£o de informaÃ§Ã£o (IIT) - `phi_estimate`
- Î¨ (Psi): Criatividade/InovaÃ§Ã£o (Deleuze) - `psi`
- Ïƒ (Sigma): Sinthome/Estrutura (Lacan) - `sigma`
- Î” (Delta): Trauma/DivergÃªncia - `delta`
- Gozo: Excesso pulsional - `gozo`
- Control Effectiveness: Efetividade de controle - `control_effectiveness`
- TrÃ­ade Completa: (Î¦, Î¨, Ïƒ) com validaÃ§Ã£o - `triad`
- RNN Metrics: `phi_causal`, `rho_C/P/U norms`, `repression_strength`

**Arquivos Gerados:**
- MÃ©tricas com timestamp: `data/monitor/phi_{ciclos}_cycles_{modo}_metrics_{timestamp}.json`
- MÃ©tricas latest: `data/monitor/phi_{ciclos}_cycles_{modo}_metrics.json`
- Progresso: `data/monitor/phi_{modo}_progress.json`
- Ãndice de execuÃ§Ãµes: `data/monitor/executions_index.json`

**Marker Categories:**
| Marker | Purpose | run_tests_fast.sh | run_tests_with_defense.sh |
|--------|---------|---|---|
| `@pytest.mark.real` (no chaos) | GPU+LLM+Network logic tests | âœ… Included | âœ… Included |
| `@pytest.mark.real + @pytest.mark.chaos` | Server destruction tests | âŒ Excluded | âœ… Included |
| `@pytest.mark.slow` | Tests taking >30s | âŒ Excluded | âŒ Excluded |
| (no markers) | Unit/integration mocked tests | âœ… Included | âœ… Included |

### IndexaÃ§Ã£o de Embeddings

**Sistema de Embeddings OmniMind:**
- **Script principal**: `run_indexing.py` - IndexaÃ§Ã£o completa do projeto
- **MÃ³dulo**: `src/embeddings/code_embeddings.py` - Sistema de embeddings abrangente
- **Banco vetorial**: Qdrant (porta 6333)

**Funcionalidades:**
- âœ… IndexaÃ§Ã£o completa: cÃ³digo, documentaÃ§Ã£o, dados, logs, modelos, notebooks
- âœ… IndexaÃ§Ã£o incremental: sÃ³ processa arquivos modificados
- âœ… Metadados do sistema: kernel, hardware, processos
- âœ… ParalelizaÃ§Ã£o: mÃºltiplos workers para performance
- âœ… **GPU Otimizada**: Gerenciamento automÃ¡tico de memÃ³ria GPU
- âœ… **ExecuÃ§Ã£o AssÃ­ncrona**: Previne fragmentaÃ§Ã£o de memÃ³ria

**ConfiguraÃ§Ãµes GPU:**
- **Threshold automÃ¡tico**: 500MB mÃ­nimo de VRAM livre
- **Limpeza automÃ¡tica**: `torch.cuda.empty_cache()` apÃ³s batches
- **Batch processing**: Tamanho configurÃ¡vel (padrÃ£o: 32)
- **ForÃ§ar GPU**: `OMNIMIND_FORCE_GPU_EMBEDDINGS=true`

```bash
# IndexaÃ§Ã£o completa
python run_indexing.py

# IndexaÃ§Ã£o incremental (sÃ³ modificados)
python run_indexing.py --incremental

# ConfiguraÃ§Ã£o GPU personalizada
python run_indexing.py --gpu-memory-threshold 1000 --batch-size 64

# ForÃ§ar GPU independente de memÃ³ria
python run_indexing.py --force-gpu

# Desabilitar async (modo compatibilidade)
python run_indexing.py --disable-async

# Ver todas as opÃ§Ãµes
python run_indexing.py --help
```

**Tipos de ConteÃºdo Indexados:**
- **CÃ³digo**: `.py`, `.js`, `.ts`, `.java`, `.cpp`, `.go`, `.rs`
- **DocumentaÃ§Ã£o**: `.md`, `.txt`, `.rst`, `.adoc`
- **Dados**: `.json`, `.jsonl`, `.csv`, `.yaml`
- **Modelos**: `.pkl`, `.h5`, `.onnx`, `.pt`
- **Notebooks**: `.ipynb`
- **Sistema**: Kernel info, hardware, processos

**EstatÃ­sticas de Performance:**
- **GPU Memory Cleared**: Contador de limpezas de cache
- **Embedding Batches**: NÃºmero de batches processados
- **Total Chunks**: Fragmentos indexados
- **Tempo de processamento**: Com paralelizaÃ§Ã£o

---

## ğŸ“‹ Configuration Files

**Test Configuration** (`config/pytest.ini`):
- Per-test timeout: 800 seconds (independent, not cumulative)
- Timeout method: thread-based (safe interrupt)
- Markers: Custom pytest markers for organization
- Max failures: 100 (show all issues, don't stop early)

**Environment Variables** (used in test scripts):
- `CUDA_VISIBLE_DEVICES=0` - Force GPU device 0
- `OMNIMIND_GPU=true` - Enable GPU
- `OMNIMIND_FORCE_GPU=true` - Force GPU detection with fallback
- `OMNIMIND_DEV=true` - Development mode
- `OMNIMIND_DEBUG=true` - Debug logging
- `PYTORCH_CUDA_ALLOC_CONF=max_split_size_mb:512` - GPU memory optimization

---

## ğŸ“ Estrutura do Projeto

### Scripts Organizados (2025-12-10)
Scripts foram organizados em pastas especÃ­ficas:
- **`scripts/testing/fixes/`** - Scripts de teste de correÃ§Ãµes
- **`scripts/monitoring/phase7/`** - Monitoramento Phase 7
- **`scripts/utilities/maintenance/`** - UtilitÃ¡rios de manutenÃ§Ã£o
- **`scripts/archive/deprecated/`** - Scripts arquivados

Ver: `docs/ORGANIZACAO_SCRIPTS_20251210.md` para detalhes completos.

### DocumentaÃ§Ã£o Organizada (2025-12-10)
DocumentaÃ§Ã£o foi reorganizada em:
- **`docs/corrections/`** - CorreÃ§Ãµes e auditorias (24 arquivos)
- **`docs/reports/tasks/`** - RelatÃ³rios de tarefas (4 arquivos)
- **`docs/analysis/`** - AnÃ¡lises e diagnÃ³sticos
- **`docs/canonical/`** - Documentos canÃ´nicos e referÃªncia

Documentos canÃ´nicos mantidos em `docs/`:
- [HISTORICO_RESOLUCOES.md](docs/HISTORICO_RESOLUCOES.md) - HistÃ³rico de resoluÃ§Ãµes
- [implementation/pending/PENDENCIAS_CONSOLIDADAS.md](docs/implementation/pending/PENDENCIAS_CONSOLIDADAS.md) - PendÃªncias ativas
- [README.md](docs/README.md) - DocumentaÃ§Ã£o principal

Ver: [ORGANIZACAO_DOCUMENTACAO_20251210.md](docs/ORGANIZACAO_DOCUMENTACAO_20251210.md) para detalhes completos.

---

## ğŸ› ï¸ ManutenÃ§Ã£o e Backup

### RotaÃ§Ã£o de Logs (Logrotate)

O sistema possui configuraÃ§Ã£o automatizada de rotaÃ§Ã£o de logs:

**ConfiguraÃ§Ã£o**: `config/logrotate/omnimind`

**InstalaÃ§Ã£o**:
```bash
sudo cp config/logrotate/omnimind /etc/logrotate.d/
sudo chmod 644 /etc/logrotate.d/omnimind
```

**PolÃ­ticas de RetenÃ§Ã£o**:
- **Logs gerais** (`logs/*.log`): 7 dias, compressÃ£o diÃ¡ria
- **Logs de mÃ³dulos** (`logs/modules/*.jsonl`): 14 dias, compressÃ£o diÃ¡ria
- **Logs de seguranÃ§a** (`logs/security/*.jsonl`): 30 dias, compressÃ£o diÃ¡ria

**Teste manual**:
```bash
sudo logrotate -d /etc/logrotate.d/omnimind  # dry-run
sudo logrotate -f /etc/logrotate.d/omnimind  # forÃ§ar rotaÃ§Ã£o
```

### Limpeza AutomÃ¡tica de Dados

**Script**: `scripts/maintenance/cleanup_old_data.sh`

**ExecuÃ§Ã£o manual**:
```bash
./scripts/maintenance/cleanup_old_data.sh
```

**O que Ã© limpo automaticamente**:
- âœ… Alertas antigos (`data/alerts/*.json`) > 30 dias
- âœ… Dados de stimulation (`data/stimulation/*.json`) > 30 dias
- âœ… Incidentes forenses (`data/forensics/incidents/*.json`) > 60 dias
- âœ… Logs de mÃ³dulos comprimidos > 90 dias
- âœ… PIDs Ã³rfÃ£os (processos que nÃ£o existem mais)
- âœ… CompressÃ£o de logs de mÃ³dulos > 7 dias

**Log de execuÃ§Ã£o**: `logs/maintenance_cleanup.log`

### Tarefas Cron (AutomaÃ§Ã£o)

**Template**: `config/cron/omnimind.crontab`

**InstalaÃ§Ã£o**:
```bash
crontab -e
# Adicionar as linhas do arquivo config/cron/omnimind.crontab
```

**Tarefas configuradas**:
- **Limpeza diÃ¡ria**: 3h da manhÃ£ (cleanup_old_data.sh)
- **RelatÃ³rio semanal de disco**: Domingos Ã s 4h (disk_usage_report.sh)
- **VerificaÃ§Ã£o de PIDs Ã³rfÃ£os**: A cada hora (check_orphaned_pids.sh)

### Scripts Auxiliares de ManutenÃ§Ã£o

#### 1. VerificaÃ§Ã£o de PIDs Ã“rfÃ£os
**Script**: `scripts/maintenance/check_orphaned_pids.sh`

Remove arquivos `.pid` de processos que nÃ£o existem mais.

```bash
./scripts/maintenance/check_orphaned_pids.sh
```

**Log**: `logs/orphaned_pids.log`

#### 2. RelatÃ³rio de Uso de Disco
**Script**: `scripts/maintenance/disk_usage_report.sh`

Gera relatÃ³rio detalhado de uso de disco do projeto.

```bash
./scripts/maintenance/disk_usage_report.sh
```

**RelatÃ³rio salvo em**: `reports/disk_usage_YYYYMMDD.txt`

**InformaÃ§Ãµes incluÃ­das**:
- Uso total do projeto
- Top 10 diretÃ³rios maiores
- Detalhamento de `logs/` e `data/`
- EspaÃ§o livre na partiÃ§Ã£o `/home`
- Arquivos grandes (> 50MB)

### PolÃ­tica de Backup

#### Dados CrÃ­ticos (Backup DiÃ¡rio Recomendado)

**DiretÃ³rios essenciais**:
- `data/long_term_logs/` - MÃ©tricas de longo prazo e heartbeat
- `data/autopoietic/` - HistÃ³rico de ciclos e cÃ³digo sintetizado
- `logs/hash_chain.json` - Cadeia de auditoria imutÃ¡vel
- `data/metrics/` - Snapshots de mÃ©tricas de consciÃªncia

**Exemplo de backup para S3/bucket externo**:
```bash
#!/bin/bash
# Backup diÃ¡rio para volume externo ou S3
BACKUP_DATE=$(date +%Y%m%d)
BACKUP_DIR="/mnt/backup/omnimind"  # ou s3://bucket/omnimind

# Criar backup comprimido
tar -czf "${BACKUP_DIR}/omnimind_critical_${BACKUP_DATE}.tar.gz" \
    -C /home/fahbrain/projects/omnimind \
    data/long_term_logs/ \
    data/autopoietic/ \
    data/metrics/ \
    logs/hash_chain.json

# Ou usar rclone para S3:
# rclone sync data/long_term_logs/ s3:omnimind-backup/long_term_logs/
```

**RetenÃ§Ã£o sugerida**:
- **Backups diÃ¡rios**: 30 dias
- **Backups semanais**: 6 meses
- **Backups mensais**: indefinido (arquivamento)

#### Dados TemporÃ¡rios (Limpeza AutomÃ¡tica)

**NÃ£o requerem backup**:
- `data/alerts/` - Rotacionados automaticamente (30 dias)
- `data/stimulation/` - Dados experimentais limpos (30 dias)
- `data/forensics/incidents/` - Incidentes antigos (60 dias)
- `logs/*.log` - Logs rotacionados (7-30 dias)

### Monitoramento de EspaÃ§o em Disco

**Alerta recomendado**: Quando uso de `/home` > 80%

**Script de verificaÃ§Ã£o rÃ¡pida**:
```bash
# Verificar uso total do projeto
du -sh /home/fahbrain/projects/omnimind

# Verificar espaÃ§o livre
df -h /home

# Identificar maiores consumidores
du -sh /home/fahbrain/projects/omnimind/* | sort -hr | head -n 10
```

**IntegraÃ§Ã£o com systemd/prometheus** (opcional):
- Configurar alertas via `prometheus-node-exporter`
- NotificaÃ§Ãµes quando uso > 80% da partiÃ§Ã£o

### Recovery e PreservaÃ§Ã£o de EmergÃªncia

**Script de recuperaÃ§Ã£o**: `scripts/omnimind_intelligent_recovery.sh`

**PreservaÃ§Ã£o automÃ¡tica de emergÃªncia**:
- Snapshot de dados vitais (`data/`, `logs/`)
- CompressÃ£o de logs antigos
- LiberaÃ§Ã£o de "espaÃ§o mental"

**CorreÃ§Ãµes aplicadas**:
- âœ… VariÃ¡vel `MAX_RETRIES=3` corrigida
- âœ… Estrutura de `if` corrigida
- âœ… Contagem de falhas consecutivas
- âœ… Reset automÃ¡tico apÃ³s preservaÃ§Ã£o

**Uso**:
```bash
./scripts/omnimind_intelligent_recovery.sh
```

**Snapshots salvos em**: `snapshots/emergency_snap_YYYYMMDD_HHMMSS.tar.gz`

---

## ğŸ“Š LocalizaÃ§Ã£o de Artefatos de Longo Prazo

| Tipo de Dado | LocalizaÃ§Ã£o | PropÃ³sito | Backup |
|--------------|-------------|-----------|--------|
| **MÃ©tricas de longo prazo** | `data/long_term_logs/omnimind_metrics.jsonl` | HistÃ³rico de mÃ©tricas de consciÃªncia | âœ… DiÃ¡rio |
| **Heartbeat** | `data/long_term_logs/heartbeat.status` | Status de vida do sistema | âœ… DiÃ¡rio |
| **HistÃ³rico de ciclos** | `data/autopoietic/cycle_history.jsonl` | Ciclos autopoiÃ©ticos | âœ… DiÃ¡rio |
| **CÃ³digo sintetizado** | `data/autopoietic/synthesized_code/` | CÃ³digo gerado autonomamente | âœ… DiÃ¡rio |
| **Cadeia de auditoria** | `logs/hash_chain.json` | Auditoria imutÃ¡vel | âœ… DiÃ¡rio |
| **Snapshots de mÃ©tricas** | `data/metrics/baselines.json`, `history.jsonl` | Baselines e histÃ³rico | âœ… DiÃ¡rio |
| **Alertas** | `data/alerts/*.json` | Alertas do sistema | â±ï¸ 30 dias |
| **Incidentes forenses** | `data/forensics/incidents/*.json` | Logs de incidentes | â±ï¸ 60 dias |
| **Logs de mÃ³dulos** | `logs/modules/*.jsonl` | Logs detalhados de mÃ³dulos | â±ï¸ 14 dias |
| **Logs de seguranÃ§a** | `logs/security/*.jsonl` | Eventos de seguranÃ§a | â±ï¸ 30 dias |

**Legenda**:
- âœ… DiÃ¡rio - Backup diÃ¡rio recomendado
- â±ï¸ N dias - Limpeza automÃ¡tica apÃ³s N dias

