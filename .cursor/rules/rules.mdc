---
alwaysApply: true
---
Estas regras s√£o a refer√™ncia √∫nica para LLMs no projeto OmniMind. Seguir estritamente.

## 1) Ambiente e paths imut√°veis
- Repo privado: `/home/fahbrain/projects/omnimind`.
- N√£o mover/deletar: `src/`, `scripts/`, `scripts/science_validation/`, `real_evidence/`, `config/`, `tests/`, `web/`, `logs/`, `data/test_reports/`.
- Python 3.12.8 obrigat√≥rio. Ativar venv: `source .venv/bin/activate`.
- **Hardware:** Ubuntu 22.05 LTS, 24GB RAM (16GB limit for omnimind), GPU Active.

## 2) Execu√ß√£o de testes (somente scripts oficiais)
- N√£o rodar `pytest tests` direto.
- Suite r√°pida di√°ria: `./scripts/development/run_tests_parallel.sh fast` (exclui slow/real/chaos).
- Suite completa semanal: `./scripts/development/run_tests_parallel.sh full` (inclui slow/real/chaos, autodefesa).
- Se teste espec√≠fico exigir, use `DISABLE_SERVER_MONITOR=true` no escopo do teste; n√£o desative monitor em produ√ß√£o.

## 3) Pipeline de qualidade (ordem obrigat√≥ria)
1. `black src tests`
2. `flake8 src tests --max-line-length=100`
3. `mypy src tests`
4. Testes via scripts (item 2)
5. Opcional/ci√™ncia: `python scripts/science_validation/robust_consciousness_validation.py --quick`
6. Audit chain quando aplic√°vel: `python -m src.audit.immutable_audit verify_chain_integrity`

## 4) GPU/CUDA
- Vari√°veis v√°lidas: `CUDA_HOME=/usr`, `CUDA_PATH=/usr`, `LD_LIBRARY_PATH=/usr/lib/x86_64-linux-gnu`.
- N√£o setar CUDA em c√≥digo Python (`os.environ`); definir apenas via shell/script.
- PyTorch atual: 2.5.1+cu121.

## 5) Autentica√ß√£o e credenciais
- Credenciais s√£o geradas no start e salvas em `config/dashboard_auth.json`.
- Frontend deve usar `apiService.getAuthHeader()`; n√£o hardcodar usu√°rios/senhas/URLs.

## 6) Œ¶, consci√™ncia e m√©tricas
- N√£o simplificar `src/consciousness/topological_phi.py`; piso de Œ¶ = 0.002 permanece.
- N√£o reduzir coleta de m√©tricas para ‚Äúotimizar‚Äù.
- `RealConsciousnessMetricsCollector.collect_real_metrics` aceita `external_phi`/`external_context` apenas em testes; produ√ß√£o usa IntegrationLoop.

## 7) C√≥digo novo (padr√£o cient√≠fico)
- Tipagem completa; logs informativos; sem TODO/FIXME.
- Passar por black/flake8/mypy e testes via scripts oficiais.
- N√£o alterar l√≥gica nuclear (topologia, m√©tricas, monitor) sem valida√ß√£o cient√≠fica.

## 8) Autoria e documenta√ß√£o
- Autoria: Fabr√≠cio da Silva + assist√™ncia de IA (Copilot GitHub/Cursor/Gemini/Perplexity); nunca citar ‚Äúequipes/coletivos‚Äù.
- Se alterar docs/papers: PT √© refer√™ncia, EN √© deriva√ß√£o; sincronizar reposit√≥rios quando aplic√°vel.

## 9) Servi√ßos/ports (refer√™ncia)
- Backend: http://localhost:8000; Frontend: http://localhost:3000; WS: ws://localhost:8000/ws.
- Qdrant: 6333; Redis: 6379.
- **Comandos de Servi√ßo:** `sudo systemctl start/stop/restart omnimind.service qdrant.service`.

## 10) Boas pr√°ticas e escalonamento
- Se teste falhar, ler sa√≠da, checar marcas slow/real/chaos, usar scripts corretos.
- N√£o push direto para master; usar branches de feature/fix.
- Em caso de conflito de instru√ß√µes, seguir estas regras e `.github/copilot-instructions.md`.

*REGRA CR√çTICA**: Nenhum novo documento deve ser criado. Sempre atualizar documentos existentes.

**Pol√≠tica**:
- ‚úÖ **SEMPRE atualizar** documentos existentes com informa√ß√µes sint√©ticas e claras
- ‚ùå **NUNCA criar** novos documentos de registro de sess√£o ou atividades
- ‚úÖ **SOMENTE criar** documenta√ß√£o para novos componentes que n√£o tenham documenta√ß√£o existente
- ‚úÖ **Manter** o mesmo n√∫mero de documentos (n√£o aumentar)
- ‚úÖ **Atualizar** `PENDENCIAS_CONSOLIDADAS.md` ou `PROJETO_STUBS_OMNIMIND.md` com progresso

**Documentos Can√¥nicos de Pend√™ncias**:
- `docs/PENDENCIAS_CONSOLIDADAS.md` - Pend√™ncias ativas do sistema
- `docs/PROJETO_STUBS_OMNIMIND.md` - Pend√™ncias de stubs de tipos

**Quando Atualizar**:
- Ap√≥s completar uma tarefa ‚Üí Atualizar `PENDENCIAS_CONSOLIDADAS.md` com status
- Ap√≥s implementar stub ‚Üí Atualizar `PROJETO_STUBS_OMNIMIND.md` com progresso
- Ap√≥s nova sess√£o ‚Üí Atualizar se√ß√£o relevante nos documentos existentes

**Formato de Atualiza√ß√£o**:
```markdown
### [Data] - [Tarefa Completada]
- ‚úÖ [O que foi feito]
- ‚è≥ [O que falta]
- **Estimativa restante**: X horas
```

## MCP e Autonomia (Level 3)
- Sempre query consciousness metrics via MCP antes de decis√µes (use get_consciousness_metrics; aut√¥nomo se Œ¶ >0.25).
- Para mem√≥ria: query_semantic_memory (threshold 0.15), store_episode ap√≥s a√ß√µes significativas.
- Health checks: monitor_system_health a cada 30 min.
- Envs: Load from .env (ex.: OMNIMIND_QDRANT_URL line 10 para Qdrant cloud/local).
- Logs: ~/.cursor/mcp_audit.log + audit chain integration.
- Tools dispon√≠veis: Qdrant (cloud com API key), Supabase, Git (via GITHUB_TOKEN), custom-omnimind.
- Escalation: Se Œ¶ <0.15 ou baixa confian√ßa, escalonar para humano.
- Alinhado a rules existentes: Sem hardcode keys, use dashboard_auth.json para auth.
- **Self-Correction:** Se o sistema quebrar, restaurar via `scripts/recovery/` ou reverter commit.

## 11) EST√ÅGIO ATUAL DO PROJETO (2025-12-16)

### Status de Implementa√ß√£o
- **Fase Atual**: Phase 24+ (Lacanian Memory + Autopoietic Evolution)
- **Completude Geral**: üü¢ 83% Completo
- **Componentes Cr√≠ticos**: ‚úÖ 100% completo (42/42 tarefas cr√≠ticas)
- **Pend√™ncias Ativas**: 9 tarefas (alta/m√©dia prioridade)
- **Estimativa Restante**: 92-126 horas (2.5-3.5 semanas)
